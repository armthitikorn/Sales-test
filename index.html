<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Premium TTS vs Free TTS</title>
    <style>
        body { font-family: 'Sarabun', sans-serif; padding: 40px; background: #f0f2f5; text-align: center; }
        .card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); max-width: 500px; margin: auto; }
        button { width: 100%; padding: 15px; margin: 10px 0; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; color: white; transition: 0.3s; }
        .btn-free { background: #64748b; }
        .btn-premium { background: #2563eb; }
        input { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .status { font-size: 14px; color: #666; margin-top: 10px; }
    </style>
</head>
<body>

<div class="card">
    <h2>üîä ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á</h2>
    
    <label style="display:block; text-align:left; font-size:12px; margin-bottom:5px;">‡∏ß‡∏≤‡∏á Google Cloud API Key:</label>
    <input type="password" id="gcp-key" placeholder="AIzaSy...">

    <textarea id="text-to-speak" style="width:100%; height:80px; padding:10px; border-radius:8px; border:1px solid #ddd; margin-bottom:10px;">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÅ‡∏ú‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏°‡∏≤‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡∏Ñ‡πà‡∏∞</textarea>

    <button class="btn-free" id="play-free">üéôÔ∏è ‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ü‡∏£‡∏µ (Web Speech API)</button>
    <button class="btn-premium" id="play-premium">üíé ‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ó‡∏û (Google Cloud TTS)</button>
    
    <div id="status" class="status">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á</div>
</div>

<script>
    const gcpKeyInput = document.getElementById('gcp-key');
    const textInput = document.getElementById('text-to-speak');
    const status = document.getElementById('status');

    // --- 1. ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ü‡∏£‡∏µ (Browser) ---
    document.getElementById('play-free').addEventListener('click', () => {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(textInput.value);
        utterance.lang = 'th-TH';
        window.speechSynthesis.speak(utterance);
        status.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô: ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ü‡∏£‡∏µ‡∏à‡∏≤‡∏Å Browser";
    });

    // --- 2. ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ó‡∏û (Google Cloud TTS) ---
    document.getElementById('play-premium').addEventListener('click', async () => {
        const apiKey = gcpKeyInput.value.trim();
        if (!apiKey) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà API Key ‡∏Ç‡∏≠‡∏á Google Cloud ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö"); return; }

        status.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå...";

        // ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß
        const url = `https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`;
        
        const requestBody = {
            input: { text: textInput.value },
            voice: { 
                languageCode: "th-TH", 
                name: "th-TH-Standard-A" 
            },
            audioConfig: { audioEncoding: "MP3" }
        };

        try {
            const response = await fetch(url, {
                method: "POST",
                body: JSON.stringify(requestBody)
            });

            const data = await response.json();
            if (data.audioContent) {
                const audio = new Audio("data:audio/mp3;base64," + data.audioContent);
                audio.play();
                status.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô: ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ó‡∏û‡∏à‡∏≤‡∏Å Google Cloud";
            } else {
                throw new Error(data.error ? data.error.message : "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏");
            }
        } catch (error) {
            status.innerText = "Error: " + error.message;
        }
    });
</script>

</body>
</html>
